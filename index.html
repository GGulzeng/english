<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="utf-8"/>
<title>í€´ì¦ˆ</title>
<style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 40px;
      text-align: center;
      background-color: #f9f9f9;
    }
    h1 {
      font-size: 70px;
      margin-bottom: 30px;
      font-weight: bold;
      color: #333;
    }
    #main-menu {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 40px;
    }
    #main-menu button {
        width: 500px;
      height: 500px;
      border-radius: 20px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      background-color: #ffffff;
      padding: 20px;
      font-size: 22px;
      font-weight: bold;
      color: #333;
      cursor: pointer;
      transition: transform 0.2s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    #main-menu button:nth-child(1) { background-color: #f28b82; }
    #main-menu button:nth-child(2) { background-color: #fbbc04; }
    .choices-container {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 24px;
      margin-top: 30px;
    }
    .choice-btn {
      width: 40%;
      min-width: 300px;
      height: 120px;
      font-size: 22px;
      font-weight: bold;
      border-radius: 14px;
      background-color: #f3f3f3;
      border: 1px solid #ccc;
      cursor: pointer;
    }
    .correct { background-color: #a5d6a7 !important; }
    .incorrect { background-color: #ef9a9a !important; }
    #back-button {
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      background-color: #ccc;
      cursor: pointer;
    }
    #feedback {
      margin-top: 24px;
      font-weight: bold;
      font-size: 18px;
    }
    #quiz-box p { font-size: 70px; }
    #quiz-box p strong { font-size: 80px; }
    button.pronounce {
      font-size: 24px;
      padding: 12px 20px;
    }
    #progress {
      font-size: 24px;
      margin-bottom: 20px;
    }
    #result-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-box {
      background: #fff;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
      text-align: center;
      max-width: 500px;
      width: 80%;
    }
    #result-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }
    #result-title {
      font-size: 36px;
      margin-bottom: 16px;
      color: #333;
    }
    #result-message {
      font-size: 20px;
      color: #555;
    }
    .next-info {
      font-size: 14px;
      color: #888;
      margin-top: 20px;
    }
  
    #main-menu {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 40px;
    }

    .level-card { width: 500px;
      height: 500px;
      border-radius: 30px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      background-color: #ffffff;
      padding: 20px;
      font-size: 40px;
      font-weight: bold;
      color: #333;
      cursor: pointer;
      transition: transform 0.2s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
   
    .level-card:hover {
     transform: translateY(-8px);
    }

    .easy { background-color: #4885e8; }
    .medium { background-color: #db593b; }
    .emoji {
      font-size: 42px;
      margin-bottom: 10px;
    .description {
       font-size: 16px;
      font-weight: normal;
      margin-top: 8px;
</style>
</head>
<body>
<h1>ì˜¤ëŠ˜ì˜ ì˜ì–´í€´ì¦ˆ</h1><div id="main-menu">
<div class="level-card easy" onclick="startQuiz('elementary')">
<div class="emoji">ğŸ“˜</div>
      Level 1<br/>
<div class="description">ì´ˆë“±ì˜ì–´</div>
</div>
<div class="level-card medium" onclick="startQuiz('middle')">
<div class="emoji">ğŸ“™</div>
      Level 2<br/>
<div class="description">ì¤‘ë“±ì˜ì–´</div>
</div>
</div>

<div id="quiz-screen" style="display: none;">
<div id="progress"></div>
<button id="back-button" onclick="goBack()">â† ë’¤ë¡œê°€ê¸°</button>
<div id="quiz-box"></div>
<div id="feedback"></div>
</div>
<div id="result-modal">
<div class="modal-box">
<div id="result-icon">ğŸ‰</div>
<h2 id="result-title"></h2>
<p id="result-message"></p>
<p class="next-info">10ì´ˆ í›„ ë©”ì¸í™”ë©´ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤...</p>
</div>
</div>
<audio id="correct-audio" src="ì •ë‹µ.mp3"></audio>
<audio id="wrong-audio" src="ì˜¤ë‹µ.mp3"></audio>
<audio id="cheer-audio" src="ì´ˆë“±í•™ìƒ í™˜í˜¸ì†Œë¦¬.mp3"></audio>
<script src="quizzes.js"></script>
<script>
    let currentLevel = '';
    let quizQueue = [];
    let currentIndex = 0;
    let correctCount = 0;

    function startQuiz(level) {
      document.getElementById('main-menu').style.display = 'none';
      document.getElementById('quiz-screen').style.display = 'block';
      document.getElementById("result-modal").style.display = 'none';
      currentLevel = level;
      correctCount = 0;
      quizQueue = quizzes[level].slice().sort(() => 0.5 - Math.random());
      currentIndex = 0;
      showNextQuiz();
    }

    function goBack() {
      document.getElementById('quiz-screen').style.display = 'none';
      document.getElementById('main-menu').style.display = 'flex';
      document.getElementById('quiz-box').innerHTML = '';
      document.getElementById('feedback').textContent = '';
      document.getElementById('progress').textContent = '';
    }

    function showNextQuiz() {
      document.getElementById("feedback").textContent = "";
      document.getElementById("progress").textContent = `${currentIndex + 1} / 10`;
      const box = document.getElementById("quiz-box");
      if (currentIndex >= 10 || currentIndex >= quizQueue.length) {
        showResultModal();
        return;
      }
      const quiz = quizQueue[currentIndex++];
      const word = quiz.question.match(/'(.*?)'/)[1];
      const currentAnswer = quiz.answer.trim();
      const allAnswers = quizzes[currentLevel].map(q => q.answer.trim()).filter(a => a);
      const shuffled = allAnswers.filter(a => a !== currentAnswer).sort(() => 0.5 - Math.random()).slice(0, 3);
      shuffled.push(currentAnswer);
      const choices = shuffled.sort(() => 0.5 - Math.random());

      const buttonsHTML = '<div class="choices-container">' + choices.map(choice =>
        `<button class="choice-btn" onclick="checkAnswer(this, '${currentAnswer}')">${choice}</button>`
      ).join("") + '</div>';

      box.innerHTML = `
        <p><strong>${quiz.question}</strong></p>
        <button class="pronounce" onclick="speak('${word}')">ğŸ”Š ë°œìŒ ë“£ê¸°</button>
        <audio id="audio-${word.toLowerCase()}" src="tts/${word.toLowerCase()}.mp3"></audio>
        ${buttonsHTML}
      `;

      speak(word);
    }

    function checkAnswer(button, correctAnswer) {
      const userChoice = button.textContent.trim();
      const buttons = document.querySelectorAll(".choice-btn");

      if (userChoice === correctAnswer) {
        document.getElementById("correct-audio").play();
        button.classList.add("correct");
        correctCount++;
        buttons.forEach(btn => btn.disabled = true);
        document.getElementById("feedback").textContent = "ì •ë‹µì…ë‹ˆë‹¤!";
        document.getElementById("feedback").style.color = "green";
        setTimeout(showNextQuiz, 2000);
      } else {
        document.getElementById("wrong-audio").play();
        button.classList.add("incorrect");
        buttons.forEach(btn => {
          if (btn.textContent.trim() === correctAnswer) {
            btn.classList.add("correct");
          }
          btn.disabled = true;
        });
        document.getElementById("feedback").textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ '" + correctAnswer + "' ì…ë‹ˆë‹¤.";
        document.getElementById("feedback").style.color = "red";
        setTimeout(showNextQuiz, 2000);
      }
    }

    function speak(word) {
      const audioId = "audio-" + word.toLowerCase();
      const audio = document.getElementById(audioId);
      if (audio) {
        audio.currentTime = 0;
        audio.play();
      }
    }

    function showResultModal() {
      const cheerAudio = document.getElementById("cheer-audio");
      if (cheerAudio) {
        cheerAudio.currentTime = 0;
        cheerAudio.play().catch(e => console.warn("Autoplay blocked:", e));
      }
      const icon = document.getElementById("result-icon");
      const title = document.getElementById("result-title");
      const message = document.getElementById("result-message");

      let text = "";
      let emoji = "ğŸ™‚";

      if (correctCount <= 2) {
        text = "ì‹œì‘ì´ ë°˜ì´ì—ìš”! ì§€ê¸ˆì€ ë§ì´ í‹€ë ¸ì§€ë§Œ, ë°˜ë³µí•´ì„œ ì—°ìŠµí•˜ë©´ ëˆ„êµ¬ë‚˜ ì‹¤ë ¥ì´ ëŠ˜ì–´ìš”.";
        emoji = "ğŸŒ€";
      } else if (correctCount <= 4) {
        text = "ì¡°ê¸ˆì”© ìµìˆ™í•´ì§€ê³  ìˆì–´ìš”. ìì£¼ ë‚˜ì˜¤ëŠ” ë‹¨ì–´ë¥¼ ë©”ëª¨í•´ì„œ ì™¸ì›Œë³´ëŠ” ê²ƒë„ ì¢‹ì•„ìš”.";
        emoji = "ğŸ“";
      } else if (correctCount <= 6) {
        text = "ë°˜ ì´ìƒ ë§ì·„ì–´ìš”! ê¸°ì´ˆëŠ” ì˜ ë˜ì–´ ìˆì–´ìš”. í‹€ë¦° ë‹¨ì–´ëŠ” ì˜ˆë¬¸ ì†ì—ì„œ ë‹¤ì‹œ ìµí˜€ë³´ì„¸ìš”.";
        emoji = "ğŸ“š";
      } else if (correctCount === 7) {
        text = "ì˜í•˜ê³  ìˆì–´ìš”! ìœ ì‚¬í•œ ë‹¨ì–´ì™€ í•¨ê»˜ ì™¸ì›Œë³´ë©´ ë” ì¢‹ì•„ìš”.";
        emoji = "ğŸ‘";
      } else if (correctCount === 8) {
        text = "ë©‹ì ¸ìš”! ì‹¤ìˆ˜ë¥¼ ì¤„ì´ë ¤ë©´ ë¬¸ì œë¥¼ ì²œì²œíˆ ë‹¤ì‹œ ì½ì–´ë³´ëŠ” ìŠµê´€ì„ ë“¤ì´ì„¸ìš”.";
        emoji = "ğŸŒŸ";
      } else if (correctCount === 9) {
        text = "í›Œë¥­í•´ìš”! í‹€ë¦° ë‹¨ì–´ í•˜ë‚˜ë§Œ ë³µìŠµí•˜ë©´ ì™„ë²½í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.";
        emoji = "ğŸ’¡";
      } else {
        text = "ì™„ë²½í•´ìš”! ì˜¤ëŠ˜ í•™ìŠµí•œ ë‹¨ì–´ë“¤ì„ ì‹¤ì œ ë¬¸ì¥ì—ì„œ ì‚¬ìš©í•´ë³´ë©´ ë” ì˜¤ë˜ ê¸°ì–µí•  ìˆ˜ ìˆì–´ìš”.";
        emoji = "ğŸ‰";
      }

      icon.textContent = emoji;
      title.textContent = `${correctCount} / 10`;
      message.textContent = text;

      document.getElementById("result-modal").style.display = "flex";
      setTimeout(() => {
        goBack();
        document.getElementById("result-modal").style.display = "none";
      }, 10000);
    }
  </script>
</body>
</html>
